{
  "url": "https://github.com/Yale-LILY/spider",
  "text": "Spider: A Large-Scale Human-Labeled Dataset for Complex and Cross-Domain Semantic Parsing and Text-to-SQL Task\nSpider is a large human-labeled dataset for complex and cross-domain semantic parsing and text-to-SQL task (natural language interfaces for relational databases). It is released along with our EMNLP 2018 paper: Spider: A Large-Scale Human-Labeled Dataset for Complex and Cross-Domain Semantic Parsing and Text-to-SQL Task. This repo contains all code for evaluation, preprocessing, and all baselines used in our paper. Please refer to the task site for more general introduction and the leaderboard.\nWe will use Test Suite Accuracy as our official evaluation metric for Spider, SParC, and CoSQL. Please find the evaluation code from here.\n, and reparsed SQL queries (this only affects some models (e.g. RATSQL) which use our parsed SQL as the SQL input). Please download the Spider dataset from the page again.06/07/2020\nWe corrected some annotation errors and label mismatches (not errors) in Spider dev and test sets (~4% of dev examples updated, click here for more details). Please download the Spider dataset from the page again.01/16/2020\nFor value prediction (in order to compute the execution accuracy), your model should be able to 1) copy from the question inputs, 2) retrieve from the database content (database content is available), or 3) generate numbers (e.g. 3 in \"LIMIT 3\").1/14/2019\nThe submission toturial is ready! Please follow it to get your results on the unreleased test data.12/17/2018\nWe updated 7 sqlite database files. Please download the Spider data from the official website again. Please refer to the issue 14 for more details.10/25/2018\n: evaluation script is updated so that the table incount(*)\ncases will be evaluated as well. Please check out the issue 5 for more info. Results of all baselines and syntaxSQL on the papers are updated as well.10/25/2018\n: to get the latest SQL parsing results (a few small bugs fixed), please usepreprocess/parse_raw_json.py\nto update. Please refer to the issue 3 for more details.\nThe dataset is annotated by 11 college students. When you use the Spider dataset, we would appreciate it if you cite the following:\ntitle = {Spider: A Large-Scale Human-Labeled Dataset for Complex and Cross-Domain Semantic Parsing and Text-to-SQL Task},\nauthor = {Tao Yu and Rui Zhang and Kai Yang and Michihiro Yasunaga and Dongxu Wang and Zifan Li and James Ma and Irene Li and Qingning Yao and Shanelle Roman and Zilin Zhang and Dragomir Radev}\nbooktitle = \"Proceedings of the 2018 Conference on Empirical Methods in Natural Language Processing\",\npublisher = \"Association for Computational Linguistics\",\nare written in Python 3. Enviroment setup for each baseline is in README under each baseline directory.\n: the natural language questionquestion_toks\n: the natural language question tokensdb_id\n: the database id to which this question is addressed.query\n: the SQL query corresponding to the question.query_toks\n: the SQL query tokens corresponding to the question.sql\n: parsed results of this SQL query usingprocess_sql.py\ndirectory for the detailed documentation.\n\"query\": \"SELECT avg(LifeExpectancy) FROM country WHERE Name NOT IN (SELECT T1.Name FROM country AS T1 JOIN countrylanguage AS T2 ON T1.Code = T2.CountryCode WHERE T2.Language = \\\"English\\\" AND T2.IsOfficial = \\\"T\\\")\",\n\"query_toks\": [\"SELECT\", \"avg\", \"(\", \"LifeExpectancy\", \")\", \"FROM\", ...],\n\"question\": \"What is average life expectancy in the countries where English is not the official language?\",\n\"question_toks\": [\"What\", \"is\", \"average\", \"life\", ...],\ncontains the following information for each database:\n: original table names stored in the database.table_names\n: cleaned and normalized table names. We make sure the table names are meaningful. [to be changed]column_names_original\n: original column names stored in the database. Each column looks like:[0, \"id\"]\nis the index of table names intable_names\n: cleaned and normalized column names. We make sure the column names are meaningful. [to be changed]column_types\n. These two columns are foreign keys of two different tables.primary_keys\n: primary keys in the database. Each number is the index ofcolumn_names\nAll table contents are contained in corresponding SQLite3 database files.\nUpdate 11/15/20: We will use Test Suite Accuracy as our official evaluation metric for Spider, SParC, and CoSQL. Please find the evaluation code from here. Our evaluation metrics include Component Matching, Exact Matching, and Execution Accuracy. For component and exact matching evaluation, instead of simply conducting string comparison between the predicted and gold SQL queries, we decompose each SQL into several clauses, and conduct set comparison in each SQL clause.\nFor Execution Accuracy, our current models do not predict any value in SQL conditions so that we do not provide execution accuracies. However, we encourage you to provide it in the future submissions. For value prediction, you can assume that a list of gold values for each question is given. Your model has to fill them into the right slots in the SQL.\nPlease refer to our paper and this page for more details and examples.\npython evaluation.py --gold [gold file] --pred [predicted file] --etype [evaluation type] --db [database dir] --table [table file]\n[gold file] gold.sql file where each line is `a gold SQL \\t db_id`\n[predicted file] predicted sql file where each line is a predicted SQL\n[evaluation type] \"match\" for exact set matching score, \"exec\" for execution score, and \"all\" for both\n[database dir] directory which contains sub-directories where each SQLite3 database is stored\n[table file] table.json file which includes foreign key info of each database"
}